<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cantinho do Sabor - Delivery</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* Reset e estilos gerais */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        :root {
            --primary: #ff7b00;
            --primary-dark: #e66b00;
            --light: #ffffff;
            --light-gray: #f5f5f5;
            --gray: #e0e0e0;
            --dark-gray: #757575;
            --text: #333333;
            --success: #4caf50;
        }

        body {
            background-color: var(--light-gray);
            color: var(--text);
            line-height: 1.6;
        }

        .container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 15px;
        }

        .btn {
            background-color: var(--primary);
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.3s;
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }

        .btn:hover {
            background-color: var(--primary-dark);
        }

        .btn-outline {
            background-color: transparent;
            border: 1px solid var(--primary);
            color: var(--primary);
        }

        .btn-outline:hover {
            background-color: var(--primary);
            color: white;
        }

        .btn-sm {
            padding: 6px 10px;
            font-size: 0.9rem;
        }

        .btn-lg {
            padding: 14px 20px;
            font-size: 1.1rem;
            width: 100%;
        }

        .hidden {
            display: none !important;
        }

        /* Splash Screen */
        #splash {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: var(--primary);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            color: white;
            text-align: center;
        }

        #splash .logo {
            font-size: 3rem;
            margin-bottom: 20px;
        }

        #splash h1 {
            font-size: 2rem;
            margin-bottom: 10px;
        }

        /* Header */
        header {
            background-color: white;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-top {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 15px 0;
        }

        .logo-container {
            display: flex;
            align-items: center;
        }

        .logo {
            color: var(--primary);
            font-size: 1.8rem;
            margin-right: 10px;
        }

        .logo-text {
            font-weight: 700;
            font-size: 1.5rem;
            color: var(--text);
        }

        .cart-icon {
            position: relative;
            font-size: 1.5rem;
            color: var(--primary);
        }

        .cart-count {
            position: absolute;
            top: -8px;
            right: -8px;
            background-color: var(--primary);
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
            font-weight: bold;
        }

        .header-info {
            display: flex;
            justify-content: space-between;
            background-color: var(--light-gray);
            padding: 10px 15px;
            border-radius: 8px;
            margin-bottom: 15px;
            font-size: 0.9rem;
        }

        .info-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
        }

        .info-item i {
            color: var(--primary);
            margin-bottom: 5px;
        }

        /* Categorias */
        .categories {
            display: flex;
            overflow-x: auto;
            padding: 15px 0;
            gap: 10px;
            -ms-overflow-style: none;
            scrollbar-width: none;
        }

        .categories::-webkit-scrollbar {
            display: none;
        }

        .category-btn {
            background-color: white;
            border: 1px solid var(--gray);
            border-radius: 20px;
            padding: 8px 15px;
            white-space: nowrap;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.3s;
        }

        .category-btn.active {
            background-color: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        /* Produtos */
        .products-section {
            padding: 20px 0;
        }

        .section-title {
            margin-bottom: 15px;
            font-size: 1.3rem;
            color: var(--text);
        }

        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
        }

        .product-card {
            background-color: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s;
        }

        .product-card:hover {
            transform: translateY(-5px);
        }

        .product-image {
            width: 100%;
            height: 160px;
            background-color: var(--gray);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--dark-gray);
            background-size: cover;
            background-position: center;
        }

        .product-info {
            padding: 15px;
        }

        .product-name {
            font-weight: 600;
            margin-bottom: 5px;
        }

        .product-description {
            font-size: 0.9rem;
            color: var(--dark-gray);
            margin-bottom: 10px;
            height: 40px;
            overflow: hidden;
        }

        .product-footer {
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .product-price {
            font-weight: 700;
            color: var(--primary);
            font-size: 1.1rem;
        }

        /* Modal de Produto */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            padding: 15px;
        }

        .modal {
            background-color: white;
            border-radius: 10px;
            width: 100%;
            max-width: 500px;
            max-height: 90vh;
            overflow-y: auto;
        }

        .modal-header {
            position: relative;
            padding: 15px;
            border-bottom: 1px solid var(--gray);
        }

        .modal-close {
            position: absolute;
            top: 15px;
            right: 15px;
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--dark-gray);
        }

        .modal-image {
            width: 100%;
            height: 200px;
            background-color: var(--gray);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--dark-gray);
            background-size: cover;
            background-position: center;
        }

        .modal-body {
            padding: 15px;
        }

        .modal-title {
            font-size: 1.3rem;
            margin-bottom: 5px;
        }

        .modal-description {
            color: var(--dark-gray);
            margin-bottom: 15px;
        }

        .modal-price {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 20px;
        }

        .option-group {
            margin-bottom: 20px;
        }

        .option-title {
            font-weight: 600;
            margin-bottom: 10px;
        }

        .option-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid var(--gray);
        }

        .option-label {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .option-price {
            color: var(--primary);
            font-weight: 600;
        }

        .mix-option {
            display: flex;
            gap: 15px;
            margin-top: 10px;
        }

        .mix-btn {
            flex: 1;
            padding: 10px;
            border: 2px solid var(--gray);
            border-radius: 8px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }

        .mix-btn.selected {
            border-color: var(--primary);
            background-color: rgba(255, 123, 0, 0.1);
        }

        .mix-btn i {
            margin-right: 5px;
        }

        .premium-section {
            background-color: rgba(255, 123, 0, 0.05);
            border-radius: 8px;
            padding: 15px;
            margin-top: 15px;
            border-left: 4px solid var(--primary);
        }

        .premium-title {
            color: var(--primary);
            font-weight: 600;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .selected-fillings {
            background-color: rgba(76, 175, 80, 0.1);
            border-radius: 8px;
            padding: 15px;
            margin-top: 15px;
            border-left: 4px solid var(--success);
        }

        .selected-fillings-title {
            color: var(--success);
            font-weight: 600;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .selected-fillings-list {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .selected-filling-tag {
            background-color: var(--success);
            color: white;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .selected-filling-tag .remove-filling {
            cursor: pointer;
            font-size: 0.7rem;
        }

        .modal-footer {
            padding: 15px;
            border-top: 1px solid var(--gray);
            display: flex;
            gap: 10px;
        }

        /* Carrinho - MELHORIAS ADICIONADAS */
        .cart-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            padding: 15px;
        }

        .cart-modal {
            background-color: white;
            border-radius: 10px;
            width: 100%;
            max-width: 500px;
            max-height: 90vh;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
        }

        .cart-header {
            padding: 15px;
            border-bottom: 1px solid var(--gray);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .cart-title {
            font-size: 1.3rem;
            font-weight: 600;
        }

        .cart-close {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--dark-gray);
        }

        /* ADIÇÃO: Estilo para aumentar a altura da seção do carrinho */
        .cart-body {
            min-height: 400px; /* Aumentei consideravelmente a altura mínima */
            max-height: 60vh;  /* Mantive um limite máximo */
            overflow-y: auto;
            padding: 20px;
        }

        /* ADIÇÃO: Melhorar a visualização dos itens do carrinho */
        .cart-item {
            padding: 15px 0;
            border-bottom: 1px solid var(--gray);
            margin-bottom: 15px;
        }

        .cart-item-image {
            width: 70px;
            height: 70px;
            background-color: var(--gray);
            border-radius: 8px;
            margin-right: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--dark-gray);
            background-size: cover;
            background-position: center;
        }

        /* ADIÇÃO: Dar mais destaque aos itens */
        .cart-item-details {
            flex-grow: 1;
            margin-right: 15px;
        }

        .cart-item-name {
            font-weight: 600;
            margin-bottom: 8px;
            font-size: 1.1rem;
        }

        .cart-item-options {
            font-size: 0.9rem;
            color: var(--dark-gray);
            margin-bottom: 8px;
            background-color: var(--light-gray);
            padding: 8px;
            border-radius: 5px;
        }

        .cart-item-price {
            font-weight: 700;
            color: var(--primary);
            font-size: 1.2rem;
        }

        .cart-item-controls {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .quantity-control {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .quantity-btn {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background-color: var(--light-gray);
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
        }

        .quantity {
            font-weight: 600;
        }

        .remove-btn {
            background: none;
            border: none;
            color: var(--dark-gray);
            cursor: pointer;
        }

        /* ADIÇÃO: Mensagem quando o carrinho está vazio */
        .empty-cart-message {
            text-align: center;
            padding: 60px 20px;
            color: var(--dark-gray);
            font-size: 1.1rem;
        }

        .empty-cart-message i {
            font-size: 3rem;
            margin-bottom: 15px;
            color: var(--gray);
        }

        .cart-summary {
            padding: 15px;
            border-top: 1px solid var(--gray);
        }

        .summary-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }

        .summary-total {
            font-weight: 700;
            font-size: 1.2rem;
            border-top: 1px solid var(--gray);
            padding-top: 10px;
            margin-top: 10px;
        }

        /* Formulário dentro do Carrinho */
        .cart-form {
            padding: 15px;
            border-top: 1px solid var(--gray);
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
        }

        .form-control {
            width: 100%;
            padding: 10px;
            border: 1px solid var(--gray);
            border-radius: 8px;
            font-size: 1rem;
        }

        .payment-options {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: 10px;
            margin-top: 10px;
        }

        .payment-option {
            border: 1px solid var(--gray);
            border-radius: 8px;
            padding: 10px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }

        .payment-option.selected {
            border-color: var(--primary);
            background-color: rgba(255, 123, 0, 0.1);
        }

        .payment-icon {
            font-size: 1.5rem;
            margin-bottom: 5px;
            color: var(--primary);
        }

        /* Checkout */
        .checkout-section {
            background-color: white;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .order-summary {
            background-color: var(--light-gray);
            border-radius: 8px;
            padding: 15px;
            margin-top: 20px;
        }

        .order-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            padding-bottom: 10px;
            border-bottom: 1px solid var(--gray);
        }

        /* Footer */
        footer {
            background-color: white;
            padding: 30px 0;
            margin-top: 40px;
            border-top: 1px solid var(--gray);
        }

        .footer-content {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .footer-section {
            flex: 1;
        }

        .footer-title {
            font-weight: 600;
            margin-bottom: 15px;
            color: var(--text);
        }

        .footer-links {
            list-style: none;
        }

        .footer-links li {
            margin-bottom: 8px;
        }

        .footer-links a {
            color: var(--dark-gray);
            text-decoration: none;
            transition: color 0.3s;
        }

        .footer-links a:hover {
            color: var(--primary);
        }

        .copyright {
            text-align: center;
            padding-top: 20px;
            margin-top: 20px;
            border-top: 1px solid var(--gray);
            color: var(--dark-gray);
            font-size: 0.9rem;
        }

        /* Responsividade */
        @media (min-width: 768px) {
            .header-info {
                justify-content: flex-start;
                gap: 30px;
            }
            
            .info-item {
                flex-direction: row;
                gap: 10px;
            }
            
            .footer-content {
                flex-direction: row;
            }
        }
    </style>
</head>
<body>
    <!-- Splash Screen -->
    <div id="splash">
        <div class="logo">
            <i class="fas fa-utensils"></i>
        </div>
        <h1>Cantinho do Sabor</h1>
        <p>Bem-vindo ao Cantinho do Sabor</p>
    </div>

    <!-- Header -->
    <header>
        <div class="container">
            <div class="header-top">
                <div class="logo-container">
                    <div class="logo">
                        <i class="fas fa-utensils"></i>
                    </div>
                    <div class="logo-text">Cantinho do Sabor</div>
                </div>
                <div class="cart-icon" id="cartIcon">
                    <i class="fas fa-shopping-bag"></i>
                    <span class="cart-count">0</span>
                </div>
            </div>
            <div class="header-info">
                <div class="info-item">
                    <i class="fas fa-clock"></i>
                    <span>Tempo de entrega: 40-60 min</span>
                </div>
                <div class="info-item">
                    <i class="fas fa-truck"></i>
                    <span>Taxa de entrega: Grátis</span>
                </div>
                <div class="info-item">
                    <i class="fas fa-store"></i>
                    <span>Horário: 14h às 21h</span>
                </div>
            </div>
        </div>
    </header>

    <!-- Categorias -->
    <div class="container">
        <div class="categories">
            <button class="category-btn active" data-category="mais-pedidos">Mais Pedidos</button>
            <button class="category-btn" data-category="combos">Combos</button>
            <button class="category-btn" data-category="novidades">Novidades</button>
            <button class="category-btn" data-category="monte-pastel">Monte o Seu Pastel</button>
            <button class="category-btn" data-category="pastel-doce">Pastel Doce</button>
            <button class="category-btn" data-category="cuscuz">Cuscuz Artesanal</button>
            <button class="category-btn" data-category="tapioca">Tapioca Artesanal</button>
            <button class="category-btn" data-category="petiscos">Petiscos</button>
            <button class="category-btn" data-category="sobremesas">Sobremesas</button>
            <button class="category-btn" data-category="bebidas">Bebidas</button>
        </div>
    </div>

    <!-- Produtos -->
    <main class="container">
        <div class="products-section">
            <h2 class="section-title">Mais Pedidos</h2>
            <div class="products-grid" id="productsGrid">
                <!-- Produtos serão carregados dinamicamente via JavaScript -->
            </div>
        </div>
    </main>

    <!-- Modal de Produto -->
    <div class="modal-overlay hidden" id="productModal">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title">Nome do Produto</h3>
                <button class="modal-close" id="closeProductModal">&times;</button>
            </div>
            <div class="modal-image">
                <i class="fas fa-image fa-3x"></i>
            </div>
            <div class="modal-body">
                <p class="modal-description">Descrição do produto</p>
                <div class="modal-price">R$ 0,00</div>
                
                <!-- Recheios selecionados -->
                <div class="selected-fillings hidden" id="selectedFillingsSection">
                    <h4 class="selected-fillings-title"><i class="fas fa-check-circle"></i> Recheios Selecionados</h4>
                    <div class="selected-fillings-list" id="selectedFillingsList">
                        <!-- Recheios selecionados serão mostrados aqui -->
                    </div>
                </div>
                
                <!-- Opções do produto -->
                <div class="option-group" id="sizeOptionsGroup">
                    <h4 class="option-title" id="sizeOptionsTitle">Escolha o número de recheios (obrigatório)</h4>
                    <div class="option-list" id="sizeOptions">
                        <!-- Opções de tamanho serão carregadas dinamicamente -->
                    </div>
                </div>
                
                <div class="option-group hidden" id="traditionalFillingsGroup">
                    <h4 class="option-title">Opções de recheios tradicionais</h4>
                    <div class="option-list" id="fillingOptions">
                        <!-- Opções de recheio serão carregadas dinamicamente -->
                    </div>
                </div>

                <div class="premium-section hidden" id="premiumSection">
                    <h4 class="premium-title"><i class="fas fa-gem"></i> PASTÉIS PREMIUM</h4>
                    <div class="option-group">
                        <h4 class="option-title">Opções de recheios premium</h4>
                        <div class="option-list" id="premiumFillingOptions">
                            <!-- Opções de recheio premium serão carregadas dinamicamente -->
                        </div>
                    </div>
                </div>
                
                <div class="option-group hidden" id="mixOptionsGroup">
                    <h4 class="option-title">Deseja que os recheios sejam misturados? (obrigatório)</h4>
                    <div class="mix-option">
                        <div class="mix-btn" data-mix="yes">
                            <i class="fas fa-check-circle"></i> Sim, misturar os recheios
                        </div>
                        <div class="mix-btn" data-mix="no">
                            <i class="fas fa-times-circle"></i> Não, deixar separados
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline" id="backToProducts">Voltar</button>
                <button class="btn" id="addToCart">Adicionar ao Carrinho</button>
            </div>
        </div>
    </div>

    <!-- Carrinho com Formulário Incluso -->
    <div class="cart-overlay hidden" id="cartModal">
        <div class="cart-modal">
            <div class="cart-header">
                <h3 class="cart-title">Minha Sacola</h3>
                <button class="cart-close" id="closeCartModal">&times;</button>
            </div>
            <div class="cart-body" id="cartBody">
                <!-- Itens do carrinho serão carregados dinamicamente -->
            </div>
            
            <!-- Formulário dentro do carrinho -->
            <div class="cart-form">
                <h4 class="section-title">Informações de Entrega</h4>
                <form id="cartForm">
                    <div class="form-group">
                        <label class="form-label" for="customerName">Nome completo *</label>
                        <input type="text" class="form-control" id="customerName" required placeholder="Digite seu nome completo">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label" for="customerPhone">Telefone/WhatsApp *</label>
                        <input type="tel" class="form-control" id="customerPhone" required placeholder="(00) 00000-0000">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label" for="customerAddress">Endereço completo *</label>
                        <input type="text" class="form-control" id="customerAddress" required placeholder="Rua, Avenida, Bairro">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label" for="customerNumber">Número da residência *</label>
                        <input type="text" class="form-control" id="customerNumber" required placeholder="Número">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label" for="customerReference">Ponto de referência</label>
                        <input type="text" class="form-control" id="customerReference" placeholder="Próximo a...">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label" for="customerNotes">Observações</label>
                        <textarea class="form-control" id="customerNotes" rows="3" placeholder="Alguma observação sobre o pedido?"></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Forma de pagamento *</label>
                        <div class="payment-options">
                            <div class="payment-option" data-payment="pix">
                                <div class="payment-icon">
                                    <i class="fas fa-qrcode"></i>
                                </div>
                                <div>PIX</div>
                            </div>
                            <div class="payment-option" data-payment="credit">
                                <div class="payment-icon">
                                    <i class="fas fa-credit-card"></i>
                                </div>
                                <div>Crédito</div>
                            </div>
                            <div class="payment-option" data-payment="debit">
                                <div class="payment-icon">
                                    <i class="fas fa-credit-card"></i>
                                </div>
                                <div>Débito</div>
                            </div>
                            <div class="payment-option" data-payment="cash">
                                <div class="payment-icon">
                                    <i class="fas fa-money-bill-wave"></i>
                                </div>
                                <div>Dinheiro</div>
                            </div>
                        </div>
                        <input type="hidden" id="paymentMethod" required>
                    </div>
                </form>
            </div>
            
            <div class="cart-summary">
                <div class="summary-row">
                    <span>Subtotal</span>
                    <span id="subtotal">R$ 0,00</span>
                </div>
                <div class="summary-row">
                    <span>Taxa de entrega</span>
                    <span>Grátis</span>
                </div>
                <div class="summary-row summary-total">
                    <span>Total</span>
                    <span id="total">R$ 0,00</span>
                </div>
                <button class="btn btn-lg" id="sendOrderBtn">
                    <i class="fab fa-whatsapp"></i> Enviar Pedido via WhatsApp
                </button>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3 class="footer-title">Cantinho do Sabor</h3>
                    <p>Os melhores pastéis, cuscuz e tapiocas artesanais da região. Entregamos em toda a cidade!</p>
                </div>
                
                <div class="footer-section">
                    <h3 class="footer-title">Horário de Funcionamento</h3>
                    <p>Segunda a Domingo: 14h às 21h</p>
                </div>
                
                <div class="footer-section">
                    <h3 class="footer-title">Contato</h3>
                    <ul class="footer-links">
                        <li><i class="fas fa-phone"></i> (87) 93300-9283</li>
                        <li><i class="fas fa-map-marker-alt"></i> Endereço da loja</li>
                    </ul>
                </div>
            </div>
            
            <div class="copyright">
                &copy; 2023 Cantinho do Sabor. Todos os direitos reservados.
            </div>
        </div>
    </footer>

    <script>
        // Dados dos produtos
        const products = {
            "mais-pedidos": [
                {
                    id: 1,
                    name: "Tapioca Artesanal Tradicional",
                    description: "Tapioca artesanal com recheios à sua escolha.",
                    price: 14.90,
                    image: "https://static.wixstatic.com/media/a85c73_8e4f04aa2906481bb6945e4660aeb9bf~mv2.jpg/v1/fill/w_618,h_450,fp_0.50_0.41,q_80,enc_avif,quality_auto/capa-tapioca-tradicional.jpg",
                    category: "tapioca",
                    hasRecheios: true,
                    options: {
                        sizes: [
                            { name: "2 Recheios", price: 14.90 },
                            { name: "3 Recheios", price: 15.90 },
                            { name: "4 Recheios", price: 16.90 }
                        ],
                        fillings: [
                            { name: "Frango", price: 0 },
                            { name: "Carne", price: 0 },
                            { name: "Calabresa", price: 0 },
                            { name: "Queijo", price: 0 },
                            { name: "Milho", price: 0 },
                            { name: "Azeitona", price: 0 },
                            { name: "Cheddar", price: 0 },
                            { name: "Requeijão", price: 0 }
                        ]
                    }
                },
                {
                    id: 2,
                    name: "Cuscuz Artesanal Tradicional",
                    description: "Cuscuz artesanal com recheios à sua escolha.",
                    price: 14.60,
                    image: "https://www.receitasnestle.com.br/sites/default/files/srh_recipes/acccc5d6947d213b228404cf46e79ae3.jpeg",
                    category: "cuscuz",
                    hasRecheios: true,
                    options: {
                        sizes: [
                            { name: "2 Recheios", price: 14.60 },
                            { name: "3 Recheios", price: 15.90 },
                            { name: "4 Recheios", price: 16.90 }
                        ],
                        fillings: [
                            { name: "Frango", price: 0 },
                            { name: "Carne", price: 0 },
                            { name: "Calabresa", price: 0 },
                            { name: "Queijo", price: 0 },
                            { name: "Milho", price: 0 },
                            { name: "Azeitona", price: 0 },
                            { name: "Cheddar", price: 0 },
                            { name: "Requeijão", price: 0 }
                        ]
                    }
                },
                {
                    id: 3,
                    name: "Pastel Doce de Leite",
                    description: "Pastel doce com recheio cremoso de doce de leite.",
                    price: 16.90,
                    image: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQ-lc5q6z31-lBRedcRGzevWj5QfIihrQL-mQ&s",
                    category: "pastel-doce",
                    hasRecheios: false,
                    options: {
                        sizes: [
                            { name: "M", price: 16.90 },
                            { name: "G", price: 23.62 },
                            { name: "GG", price: 28.62 }
                        ]
                    }
                },
                {
                    id: 4,
                    name: "Monte Seu Pastel Tradicional",
                    description: "Escolha o tamanho e os recheios do seu pastel tradicional.",
                    price: 16.24,
                    image: "https://sabores-new.s3.amazonaws.com/public/2025/02/7494-1024x494.jpg",
                    category: "monte-pastel",
                    hasRecheios: true,
                    options: {
                        sizes: [
                            { name: "M (2 Recheios)", price: 16.24 },
                            { name: "M (3 Recheios)", price: 17.90 },
                            { name: "M (4 Recheios)", price: 18.90 },
                            { name: "G (2 Recheios)", price: 22.64 },
                            { name: "G (3 Recheios)", price: 23.90 },
                            { name: "G (4 Recheios)", price: 25.90 },
                            { name: "GG (2 Recheios)", price: 27.31 },
                            { name: "GG (3 Recheios)", price: 28.90 },
                            { name: "GG (4 Recheios)", price: 29.90 }
                        ],
                        fillings: [
                            { name: "Frango", price: 0 },
                            { name: "Carne", price: 0 },
                            { name: "Calabresa", price: 0 },
                            { name: "Queijo", price: 0 },
                            { name: "Milho", price: 0 },
                            { name: "Azeitona", price: 0 },
                            { name: "Cheddar", price: 0 },
                            { name: "Requeijão", price: 0 }
                        ]
                    }
                }
            ],
            "monte-pastel": [
                {
                    id: 5,
                    name: "Monte Seu Pastel - Tradicional",
                    description: "Escolha o tamanho e os recheios do seu pastel tradicional.",
                    price: 16.24,
                    image: "https://sabores-new.s3.amazonaws.com/public/2025/02/7494-1024x494.jpg",
                    category: "monte-pastel",
                    hasRecheios: true,
                    options: {
                        sizes: [
                            { name: "M (2 Recheios)", price: 16.24 },
                            { name: "M (3 Recheios)", price: 17.90 },
                            { name: "M (4 Recheios)", price: 18.90 },
                            { name: "G (2 Recheios)", price: 22.64 },
                            { name: "G (3 Recheios)", price: 23.90 },
                            { name: "G (4 Recheios)", price: 25.90 },
                            { name: "GG (2 Recheios)", price: 27.31 },
                            { name: "GG (3 Recheios)", price: 28.90 },
                            { name: "GG (4 Recheios)", price: 29.90 }
                        ],
                        fillings: [
                            { name: "Frango", price: 0 },
                            { name: "Carne", price: 0 },
                            { name: "Calabresa", price: 0 },
                            { name: "Queijo", price: 0 },
                            { name: "Milho", price: 0 },
                            { name: "Azeitona", price: 0 },
                            { name: "Cheddar", price: 0 },
                            { name: "Requeijão", price: 0 }
                        ]
                    }
                },
                {
                    id: 6,
                    name: "Monte Seu Pastel - Premium",
                    description: "Pastel premium com recheios selecionados.",
                    price: 18.53,
                    image: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTZzPo1TnCJEC4E2V9kZMfhpMHyuOWP_rnkdw&s",
                    category: "monte-pastel",
                    hasRecheios: true,
                    isPremium: true,
                    options: {
                        sizes: [
                            { name: "M (2 Recheios)", price: 18.53 },
                            { name: "M (3 Recheios)", price: 19.90 },
                            { name: "M (4 Recheios)", price: 21.90 },
                            { name: "G (2 Recheios)", price: 26.09 },
                            { name: "G (3 Recheios)", price: 28.90 },
                            { name: "G (4 Recheios)", price: 30.90 },
                            { name: "GG (2 Recheios)", price: 32.90 },
                            { name: "GG (3 Recheios)", price: 35.90 },
                            { name: "GG (4 Recheios)", price: 38.90 }
                        ],
                        fillings: [
                            { name: "Frango", price: 0 },
                            { name: "Charque", price: 0 },
                            { name: "Costela", price: 0 },
                            { name: "Pernil", price: 0 },
                            { name: "Bacon", price: 0 },
                            { name: "Queijo", price: 0 },
                            { name: "Milho", price: 0 },
                            { name: "Azeitona", price: 0 },
                            { name: "Cheddar", price: 0 },
                            { name: "Requeijão", price: 0 },
                            { name: "Cream Cheese", price: 0 },
                            { name: "Alho Frito", price: 0 },
                            { name: "Pimenta Calabresa", price: 0 },
                            { name: "Molho de Tomate", price: 0 }
                        ]
                    }
                }
            ],
            "pastel-doce": [
                {
                    id: 7,
                    name: "Pastel Doce de Leite",
                    description: "Pastel doce com recheio cremoso de doce de leite.",
                    price: 16.90,
                    image: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQ-lc5q6z31-lBRedcRGzevWj5QfIihrQL-mQ&s",
                    category: "pastel-doce",
                    hasRecheios: false,
                    options: {
                        sizes: [
                            { name: "M", price: 16.90 },
                            { name: "G", price: 23.62 },
                            { name: "GG", price: 28.62 }
                        ]
                    }
                },
                {
                    id: 8,
                    name: "Pastel Romeu e Julieta",
                    description: "Combinação clássica de queijo e goiabada.",
                    price: 13.71,
                    image: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcR8bnNbG6JKhmwo9ztnMvohXOfgDgfG5AkdDQ&s",
                    category: "pastel-doce",
                    hasRecheios: false,
                    options: {
                        sizes: [
                            { name: "M", price: 13.71 },
                            { name: "G", price: 18.83 },
                            { name: "GG", price: 22.22 }
                        ]
                    }
                }
            ],
            "cuscuz": [
                {
                    id: 9,
                    name: "Cuscuz Tradicional",
                    description: "Cuscuz artesanal com recheios à sua escolha.",
                    price: 14.60,
                    image: "https://www.receitasnestle.com.br/sites/default/files/srh_recipes/acccc5d6947d213b228404cf46e79ae3.jpeg",
                    category: "cuscuz",
                    hasRecheios: true,
                    options: {
                        sizes: [
                            { name: "2 Recheios", price: 14.60 },
                            { name: "3 Recheios", price: 15.90 },
                            { name: "4 Recheios", price: 16.90 }
                        ],
                        fillings: [
                            { name: "Frango", price: 0 },
                            { name: "Carne", price: 0 },
                            { name: "Calabresa", price: 0 },
                            { name: "Queijo", price: 0 },
                            { name: "Milho", price: 0 },
                            { name: "Azeitona", price: 0 },
                            { name: "Cheddar", price: 0 },
                            { name: "Requeijão", price: 0 }
                        ]
                    }
                },
                {
                    id: 10,
                    name: "Cuscuz Premium",
                    description: "Cuscuz artesanal premium com recheios selecionados.",
                    price: 16.90,
                    image: "https://i.ytimg.com/vi/rVy7e4GH08g/hq720.jpg?sqp=-oaymwEhCK4FEIIDSFryq4qpAxMIARUAAAAAGAElAADIQj0AgKJD&rs=AOn4CLB30hyKxdEjfF7wWVBCd8BjtSQFrw",
                    category: "cuscuz",
                    hasRecheios: true,
                    options: {
                        sizes: [
                            { name: "2 Recheios", price: 16.90 },
                            { name: "3 Recheios", price: 17.90 },
                            { name: "4 Recheios", price: 18.90 }
                        ],
                        fillings: [
                            { name: "Frango", price: 0 },
                            { name: "Charque", price: 0 },
                            { name: "Costela", price: 0 },
                            { name: "Pernil", price: 0 },
                            { name: "Bacon", price: 0 },
                            { name: "Queijo", price: 0 },
                            { name: "Milho", price: 0 },
                            { name: "Azeitona", price: 0 },
                            { name: "Cheddar", price: 0 },
                            { name: "Requeijão", price: 0 },
                            { name: "Cream Cheese", price: 0 }
                        ]
                    }
                }
            ],
            "tapioca": [
                {
                    id: 11,
                    name: "Tapioca Tradicional",
                    description: "Tapioca artesanal com recheios à sua escolha.",
                    price: 14.90,
                    image: "https://static.wixstatic.com/media/a85c73_8e4f04aa2906481bb6945e4660aeb9bf~mv2.jpg/v1/fill/w_618,h_450,fp_0.50_0.41,q_80,enc_avif,quality_auto/capa-tapioca-tradicional.jpg",
                    category: "tapioca",
                    hasRecheios: true,
                    options: {
                        sizes: [
                            { name: "2 Recheios", price: 14.90 },
                            { name: "3 Recheios", price: 15.90 },
                            { name: "4 Recheios", price: 16.90 }
                        ],
                        fillings: [
                            { name: "Frango", price: 0 },
                            { name: "Carne", price: 0 },
                            { name: "Calabresa", price: 0 },
                            { name: "Queijo", price: 0 },
                            { name: "Milho", price: 0 },
                            { name: "Azeitona", price: 0 },
                            { name: "Cheddar", price: 0 },
                            { name: "Requeijão", price: 0 }
                        ]
                    }
                },
                {
                    id: 12,
                    name: "Tapioca Premium",
                    description: "Tapioca artesanal premium com recheios selecionados.",
                    price: 16.95,
                    image: "https://dynamic-media-cdn.tripadvisor.com/media/photo-o/19/c7/80/02/tapioca-de-carne-seca.jpg?w=900&h=500&s=1",
                    category: "tapioca",
                    hasRecheios: true,
                    options: {
                        sizes: [
                            { name: "2 Recheios", price: 16.95 },
                            { name: "3 Recheios", price: 15.53 },
                            { name: "4 Recheios", price: 16.00 }
                        ],
                        fillings: [
                            { name: "Frango", price: 0 },
                            { name: "Charque", price: 0 },
                            { name: "Costela", price: 0 },
                            { name: "Pernil", price: 0 },
                            { name: "Bacon", price: 0 },
                            { name: "Queijo", price: 0 },
                            { name: "Milho", price: 0 },
                            { name: "Azeitona", price: 0 },
                            { name: "Cheddar", price: 0 },
                            { name: "Requeijão", price: 0 },
                            { name: "Cream Cheese", price: 0 }
                        ]
                    }
                }
            ],
            "petiscos": [
                {
                    id: 13,
                    name: "Batata Palito",
                    description: "Porção de batata palito crocante.",
                    price: 15.86,
                    image: "https://www.paollarestaurante.com.br/tim.php?src=uploads/images/2019/08/batata-palito-1565054104.jpg&w=800&q=100",
                    category: "petiscos",
                    hasRecheios: false,
                    options: {
                        sizes: [
                            { name: "Pequena", price: 15.86 },
                            { name: "Média", price: 21.03 }
                        ]
                    }
                },
                {
                    id: 14,
                    name: "Batata Ondulada",
                    description: "Porção de batata ondulada temperada.",
                    price: 17.59,
                    image: "https://d1jial5k98p2t.cloudfront.net/stores/899/products/l_785269bc-a9a8-4e0c-a324-3cda99ce1b38.jpg",
                    category: "petiscos",
                    hasRecheios: false,
                    options: {
                        sizes: [
                            { name: "Pequena", price: 17.59 },
                            { name: "Média", price: 24.48 }
                        ]
                    }
                },
                {
                    id: 15,
                    name: "Anéis de Cebola",
                    description: "Porção de anéis de cebola empanados.",
                    price: 19.66,
                    image: "https://guiadacozinha.com.br/wp-content/uploads/2018/05/aneldecebola.webp",
                    category: "petiscos",
                    hasRecheios: false,
                    options: {
                        sizes: [
                            { name: "Pequena", price: 19.66 },
                            { name: "Média", price: 28.71 }
                        ]
                    }
                }
            ],
            "sobremesas": [
                {
                    id: 16,
                    name: "Mini Pastéis Doces",
                    description: "Seleção de mini pastéis doces variados.",
                    price: 27.47,
                    image: "https://i.ytimg.com/vi/zAvOWk1K9fs/maxresdefault.jpg",
                    category: "sobremesas",
                    hasRecheios: false,
                    options: {
                        sizes: [
                            { name: "6 unidades", price: 27.47 },
                            { name: "12 unidades", price: 44.33 },
                            { name: "18 unidades", price: 61.21 }
                        ]
                    }
                }
            ],
            "bebidas": [
                {
                    id: 17,
                    name: "Coca-Cola",
                    description: "Refrigerante Coca-Cola.",
                    price: 11.90,
                    image: "https://bistek.vtexassets.com/arquivos/ids/207162/998982.png?v=638888785140370000",
                    category: "bebidas",
                    hasRecheios: false,
                    options: {
                        sizes: [
                            { name: "1L", price: 11.90 },
                            { name: "350ml", price: 7.10 }
                        ]
                    }
                },
                {
                    id: 18,
                    name: "Guaraná Antarctica",
                    description: "Refrigerante Guaraná Antarctica.",
                    price: 9.45,
                    image: "https://phygital-files.mercafacil.com/catalogo/uploads/produto/refrigerante_antarctica_guaran_lata_350ml_33fba05c-b685-4772-9f81-83ad17498828.jpg",
                    category: "bebidas",
                    hasRecheios: false,
                    options: {
                        sizes: [
                            { name: "1L", price: 9.45 },
                            { name: "350ml", price: 6.60 }
                        ]
                    }
                }
            ]
        };

        // Estado da aplicação
        let currentCategory = "mais-pedidos";
        let currentProduct = null;
        let cart = [];
        let selectedOptions = {
            mixRecheios: null
        };
        let selectedRecheiosCount = 0;

        // Elementos DOM
        const splashScreen = document.getElementById('splash');
        const productsGrid = document.getElementById('productsGrid');
        const productModal = document.getElementById('productModal');
        const cartModal = document.getElementById('cartModal');
        const cartIcon = document.getElementById('cartIcon');
        const cartCount = document.querySelector('.cart-count');
        const cartBody = document.getElementById('cartBody');
        const subtotalElement = document.getElementById('subtotal');
        const totalElement = document.getElementById('total');
        const cartForm = document.getElementById('cartForm');
        const paymentOptions = document.querySelectorAll('.payment-option');
        const paymentMethodInput = document.getElementById('paymentMethod');
        const premiumSection = document.getElementById('premiumSection');
        const traditionalFillingsGroup = document.getElementById('traditionalFillingsGroup');
        const mixOptionsGroup = document.getElementById('mixOptionsGroup');
        const sizeOptionsGroup = document.getElementById('sizeOptionsGroup');
        const sizeOptionsTitle = document.getElementById('sizeOptionsTitle');
        const selectedFillingsSection = document.getElementById('selectedFillingsSection');
        const selectedFillingsList = document.getElementById('selectedFillingsList');

        // Inicialização
        document.addEventListener('DOMContentLoaded', function() {
            // Esconder splash screen após 2 segundos
            setTimeout(() => {
                splashScreen.classList.add('hidden');
            }, 2000);

            // Carregar produtos iniciais
            loadProducts(currentCategory);

            // Configurar eventos
            setupEventListeners();
        });

        // Configurar event listeners
        function setupEventListeners() {
            // Categorias
            document.querySelectorAll('.category-btn').forEach(button => {
                button.addEventListener('click', function() {
                    document.querySelector('.category-btn.active').classList.remove('active');
                    this.classList.add('active');
                    currentCategory = this.getAttribute('data-category');
                    loadProducts(currentCategory);
                });
            });

            // Modal de produto
            document.getElementById('closeProductModal').addEventListener('click', closeProductModal);
            document.getElementById('backToProducts').addEventListener('click', closeProductModal);

            // Adicionar ao carrinho
            document.getElementById('addToCart').addEventListener('click', addToCart);

            // Carrinho
            cartIcon.addEventListener('click', openCartModal);
            document.getElementById('closeCartModal').addEventListener('click', closeCartModal);

            // Enviar pedido
            document.getElementById('sendOrderBtn').addEventListener('click', submitOrder);

            // Métodos de pagamento
            paymentOptions.forEach(option => {
                option.addEventListener('click', function() {
                    paymentOptions.forEach(opt => opt.classList.remove('selected'));
                    this.classList.add('selected');
                    paymentMethodInput.value = this.getAttribute('data-payment');
                });
            });

            // Opções de misturar recheios
            document.querySelectorAll('.mix-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    document.querySelectorAll('.mix-btn').forEach(b => b.classList.remove('selected'));
                    this.classList.add('selected');
                    selectedOptions.mixRecheios = this.getAttribute('data-mix');
                });
            });
        }

        // Carregar produtos por categoria
        function loadProducts(category) {
            productsGrid.innerHTML = '';
            
            if (products[category]) {
                products[category].forEach(product => {
                    const productCard = document.createElement('div');
                    productCard.className = 'product-card';
                    
                    productCard.innerHTML = `
                        <div class="product-image" style="background-image: url('${product.image}')">
                        </div>
                        <div class="product-info">
                            <h3 class="product-name">${product.name}</h3>
                            <p class="product-description">${product.description}</p>
                            <div class="product-footer">
                                <div class="product-price">R$ ${product.price.toFixed(2)}</div>
                                <button class="btn btn-sm" data-id="${product.id}">Adicionar</button>
                            </div>
                        </div>
                    `;
                    
                    productCard.querySelector('button').addEventListener('click', function() {
                        openProductModal(product.id, category);
                    });
                    
                    productsGrid.appendChild(productCard);
                });
            }
        }

        // Abrir modal do produto
        function openProductModal(productId, category) {
            const product = products[category].find(p => p.id === productId);
            if (!product) return;
            
            currentProduct = product;
            selectedOptions = {
                mixRecheios: null,
                fillings: [],
                premiumFillings: []
            };
            selectedRecheiosCount = 0;
            
            // Preencher informações básicas
            document.querySelector('.modal-title').textContent = product.name;
            document.querySelector('.modal-description').textContent = product.description;
            document.querySelector('.modal-price').textContent = `R$ ${product.price.toFixed(2)}`;
            
            // Configurar imagem do modal
            const modalImage = document.querySelector('.modal-image');
            modalImage.style.backgroundImage = `url('${product.image}')`;
            modalImage.innerHTML = '';
            
            // Limpar opções anteriores
            document.getElementById('sizeOptions').innerHTML = '';
            document.getElementById('fillingOptions').innerHTML = '';
            document.getElementById('premiumFillingOptions').innerHTML = '';
            
            // Resetar opções de mistura
            document.querySelectorAll('.mix-btn').forEach(btn => btn.classList.remove('selected'));
            selectedOptions.mixRecheios = null;
            
            // Resetar seção de recheios selecionados
            selectedFillingsSection.classList.add('hidden');
            selectedFillingsList.innerHTML = '';
            
            // Mostrar/ocultar seções baseado no tipo de produto
            if (product.hasRecheios) {
                sizeOptionsGroup.classList.remove('hidden');
                traditionalFillingsGroup.classList.remove('hidden');
                mixOptionsGroup.classList.remove('hidden');
                
                // Configurar título baseado na categoria
                if (product.category === 'bebidas') {
                    sizeOptionsTitle.textContent = 'Escolha a Sua Bebida';
                } else {
                    sizeOptionsTitle.textContent = 'Escolha o número de recheios (obrigatório)';
                }
                
                // Mostrar/ocultar seção premium
                if (product.isPremium) {
                    premiumSection.classList.remove('hidden');
                    traditionalFillingsGroup.classList.add('hidden');
                } else {
                    premiumSection.classList.add('hidden');
                    traditionalFillingsGroup.classList.remove('hidden');
                }
            } else {
                // Produtos sem recheios (petiscos, sobremesas, bebidas)
                sizeOptionsGroup.classList.remove('hidden');
                traditionalFillingsGroup.classList.add('hidden');
                premiumSection.classList.add('hidden');
                mixOptionsGroup.classList.add('hidden');
                
                // Configurar título para produtos sem recheios
                if (product.category === 'bebidas') {
                    sizeOptionsTitle.textContent = 'Escolha a Sua Bebida';
                } else if (product.category === 'petiscos' || product.category === 'sobremesas') {
                    sizeOptionsTitle.textContent = 'Escolha o tamanho';
                } else {
                    sizeOptionsTitle.textContent = 'Escolha a opção';
                }
            }
            
            // Adicionar opções de tamanho
            if (product.options && product.options.sizes) {
                product.options.sizes.forEach(size => {
                    const optionItem = document.createElement('div');
                    optionItem.className = 'option-item';
                    optionItem.innerHTML = `
                        <div class="option-label">
                            <input type="radio" name="size" value="${size.name}" data-price="${size.price}" data-recheios="${getRecheiosCount(size.name)}">
                            <span>${size.name}</span>
                        </div>
                        <div class="option-price">R$ ${size.price.toFixed(2)}</div>
                    `;
                    
                    optionItem.querySelector('input').addEventListener('change', function() {
                        if (this.checked) {
                            selectedOptions.size = {
                                name: this.value,
                                price: parseFloat(this.getAttribute('data-price'))
                            };
                            selectedRecheiosCount = parseInt(this.getAttribute('data-recheios'));
                            if (product.hasRecheios) {
                                updateFillingsSelection();
                                updateSelectedFillingsDisplay();
                            }
                            updateProductPrice();
                        }
                    });
                    
                    document.getElementById('sizeOptions').appendChild(optionItem);
                });
                
                // Selecionar primeira opção por padrão
                const firstSize = document.querySelector('input[name="size"]');
                if (firstSize) {
                    firstSize.checked = true;
                    selectedOptions.size = {
                        name: firstSize.value,
                        price: parseFloat(firstSize.getAttribute('data-price'))
                    };
                    selectedRecheiosCount = parseInt(firstSize.getAttribute('data-recheios'));
                }
            }
            
            // Adicionar opções de recheio tradicionais (apenas para produtos com recheios)
            if (product.hasRecheios && product.options && product.options.fillings) {
                product.options.fillings.forEach(filling => {
                    const optionItem = document.createElement('div');
                    optionItem.className = 'option-item';
                    optionItem.innerHTML = `
                        <div class="option-label">
                            <input type="checkbox" value="${filling.name}" data-price="${filling.price}" class="filling-checkbox">
                            <span>${filling.name}</span>
                        </div>
                        <div class="option-price"></div>
                    `;
                    
                    optionItem.querySelector('input').addEventListener('change', function() {
                        if (!selectedOptions.fillings) selectedOptions.fillings = [];
                        
                        if (this.checked) {
                            if (selectedOptions.fillings.length < selectedRecheiosCount) {
                                selectedOptions.fillings.push({
                                    name: this.value,
                                    price: parseFloat(this.getAttribute('data-price'))
                                });
                            } else {
                                this.checked = false;
                                alert(`Você só pode selecionar até ${selectedRecheiosCount} recheios`);
                            }
                        } else {
                            selectedOptions.fillings = selectedOptions.fillings.filter(
                                f => f.name !== this.value
                            );
                        }
                        updateFillingsSelection();
                        updateSelectedFillingsDisplay();
                        updateProductPrice();
                    });
                    
                    document.getElementById('fillingOptions').appendChild(optionItem);
                });
            }
            
            // Adicionar opções de recheio premium
            if (product.isPremium && product.options && product.options.fillings) {
                product.options.fillings.forEach(filling => {
                    const optionItem = document.createElement('div');
                    optionItem.className = 'option-item';
                    optionItem.innerHTML = `
                        <div class="option-label">
                            <input type="checkbox" value="${filling.name}" data-price="${filling.price}" class="premium-filling-checkbox">
                            <span>${filling.name}</span>
                        </div>
                        <div class="option-price"></div>
                    `;
                    
                    optionItem.querySelector('input').addEventListener('change', function() {
                        if (!selectedOptions.premiumFillings) selectedOptions.premiumFillings = [];
                        
                        if (this.checked) {
                            if (selectedOptions.premiumFillings.length < selectedRecheiosCount) {
                                selectedOptions.premiumFillings.push({
                                    name: this.value,
                                    price: parseFloat(this.getAttribute('data-price'))
                                });
                            } else {
                                this.checked = false;
                                alert(`Você só pode selecionar até ${selectedRecheiosCount} recheios`);
                            }
                        } else {
                            selectedOptions.premiumFillings = selectedOptions.premiumFillings.filter(
                                f => f.name !== this.value
                            );
                        }
                        updateFillingsSelection();
                        updateSelectedFillingsDisplay();
                        updateProductPrice();
                    });
                    
                    document.getElementById('premiumFillingOptions').appendChild(optionItem);
                });
            }
            
            // Mostrar modal
            productModal.classList.remove('hidden');
        }

        // Extrair número de recheios do nome do tamanho
        function getRecheiosCount(sizeName) {
            const match = sizeName.match(/(\d+)\s*Recheios?/);
            return match ? parseInt(match[1]) : 2; // Padrão 2 recheios
        }

        // Atualizar seleção de recheios baseado no limite
        function updateFillingsSelection() {
            const checkboxes = document.querySelectorAll('.filling-checkbox, .premium-filling-checkbox');
            checkboxes.forEach(checkbox => {
                const isChecked = checkbox.checked;
                const currentSelected = getSelectedFillingsCount();
                
                if (!isChecked && currentSelected >= selectedRecheiosCount) {
                    checkbox.disabled = true;
                } else {
                    checkbox.disabled = false;
                }
            });
        }

        // Atualizar exibição dos recheios selecionados
        function updateSelectedFillingsDisplay() {
            const selectedFillings = [];
            
            if (selectedOptions.fillings) {
                selectedFillings.push(...selectedOptions.fillings);
            }
            
            if (selectedOptions.premiumFillings) {
                selectedFillings.push(...selectedOptions.premiumFillings);
            }
            
            selectedFillingsList.innerHTML = '';
            
            if (selectedFillings.length > 0) {
                selectedFillingsSection.classList.remove('hidden');
                
                selectedFillings.forEach(filling => {
                    const tag = document.createElement('div');
                    tag.className = 'selected-filling-tag';
                    tag.innerHTML = `
                        ${filling.name}
                        <span class="remove-filling" data-name="${filling.name}">&times;</span>
                    `;
                    selectedFillingsList.appendChild(tag);
                });
                
                // Adicionar eventos para remover recheios
                document.querySelectorAll('.remove-filling').forEach(btn => {
                    btn.addEventListener('click', function() {
                        const fillingName = this.getAttribute('data-name');
                        removeFilling(fillingName);
                    });
                });
            } else {
                selectedFillingsSection.classList.add('hidden');
            }
        }

        // Remover um recheio selecionado
        function removeFilling(fillingName) {
            if (selectedOptions.fillings) {
                selectedOptions.fillings = selectedOptions.fillings.filter(f => f.name !== fillingName);
            }
            
            if (selectedOptions.premiumFillings) {
                selectedOptions.premiumFillings = selectedOptions.premiumFillings.filter(f => f.name !== fillingName);
            }
            
            // Atualizar checkboxes
            const checkboxes = document.querySelectorAll('.filling-checkbox, .premium-filling-checkbox');
            checkboxes.forEach(checkbox => {
                if (checkbox.value === fillingName) {
                    checkbox.checked = false;
                }
            });
            
            updateFillingsSelection();
            updateSelectedFillingsDisplay();
            updateProductPrice();
        }

        // Contar recheios selecionados
        function getSelectedFillingsCount() {
            let count = 0;
            if (selectedOptions.fillings) count += selectedOptions.fillings.length;
            if (selectedOptions.premiumFillings) count += selectedOptions.premiumFillings.length;
            return count;
        }

        // Fechar modal do produto
        function closeProductModal() {
            productModal.classList.add('hidden');
        }

        // Atualizar preço do produto com base nas opções selecionadas
        function updateProductPrice() {
            let totalPrice = currentProduct.price;
            
            if (selectedOptions.size) {
                totalPrice = selectedOptions.size.price;
            }
            
            // Todos os recheios são gratuitos, então não adicionamos preços extras
            document.querySelector('.modal-price').textContent = `R$ ${totalPrice.toFixed(2)}`;
        }

        // Adicionar produto ao carrinho
        function addToCart() {
            if (!currentProduct) return;
            
            // Validar seleções obrigatórias
            if (!selectedOptions.size) {
                alert('Por favor, selecione uma opção.');
                return;
            }
            
            // Validar recheios apenas para produtos que têm recheios
            if (currentProduct.hasRecheios) {
                const selectedFillingsCount = getSelectedFillingsCount();
                if (selectedFillingsCount !== selectedRecheiosCount) {
                    alert(`Por favor, selecione exatamente ${selectedRecheiosCount} recheios.`);
                    return;
                }
                
                if (!selectedOptions.mixRecheios) {
                    alert('Por favor, selecione se deseja misturar os recheios.');
                    return;
                }
            }
            
            // Calcular preço final
            let finalPrice = currentProduct.price;
            let optionsDescription = '';
            
            if (selectedOptions.size) {
                finalPrice = selectedOptions.size.price;
                optionsDescription += `${currentProduct.hasRecheios ? 'Tamanho' : 'Opção'}: ${selectedOptions.size.name}`;
            }
            
            // Adicionar recheios tradicionais (apenas para produtos com recheios)
            if (currentProduct.hasRecheios && selectedOptions.fillings && selectedOptions.fillings.length > 0) {
                optionsDescription += ` | Recheios: ${selectedOptions.fillings.map(f => f.name).join(', ')}`;
            }
            
            // Adicionar recheios premium (apenas para produtos premium)
            if (currentProduct.hasRecheios && selectedOptions.premiumFillings && selectedOptions.premiumFillings.length > 0) {
                optionsDescription += ` | Recheios Premium: ${selectedOptions.premiumFillings.map(f => f.name).join(', ')}`;
            }
            
            // Adicionar opção de mistura (apenas para produtos com recheios)
            if (currentProduct.hasRecheios) {
                optionsDescription += ` | Misturar: ${selectedOptions.mixRecheios === 'yes' ? 'Sim' : 'Não'}`;
            }
            
            // Adicionar ao carrinho
            cart.push({
                id: Date.now(), // ID único para o item no carrinho
                productId: currentProduct.id,
                name: currentProduct.name,
                price: finalPrice,
                options: optionsDescription,
                quantity: 1
            });
            
            // Atualizar contador do carrinho
            updateCartCount();
            
            // Fechar modal
            closeProductModal();
            
            // Mostrar mensagem de sucesso
            alert('Produto adicionado ao carrinho!');
        }

        // Atualizar contador do carrinho
        function updateCartCount() {
            const totalItems = cart.reduce((total, item) => total + item.quantity, 0);
            cartCount.textContent = totalItems;
        }

        // Abrir modal do carrinho
        function openCartModal() {
            renderCartItems();
            cartModal.classList.remove('hidden');
        }

        // Fechar modal do carrinho
        function closeCartModal() {
            cartModal.classList.add('hidden');
        }

        // Renderizar itens do carrinho - ATUALIZADA COM MELHORIAS
        function renderCartItems() {
            cartBody.innerHTML = '';
            
            if (cart.length === 0) {
                cartBody.innerHTML = `
                    <div class="empty-cart-message">
                        <i class="fas fa-shopping-bag"></i>
                        <p>Seu carrinho está vazio</p>
                        <p style="font-size: 0.9rem; margin-top: 10px;">Adicione alguns produtos deliciosos!</p>
                    </div>
                `;
                subtotalElement.textContent = 'R$ 0,00';
                totalElement.textContent = 'R$ 0,00';
                return;
            }
            
            let subtotal = 0;
            
            cart.forEach(item => {
                const cartItem = document.createElement('div');
                cartItem.className = 'cart-item';
                
                // Encontrar o produto para obter a imagem
                const product = findProductById(item.productId);
                const itemImageUrl = product ? product.image : '';
                
                cartItem.innerHTML = `
                    <div class="cart-item-image" style="background-image: url('${itemImageUrl}')">
                    </div>
                    <div class="cart-item-details">
                        <div class="cart-item-name">${item.name}</div>
                        <div class="cart-item-options">${item.options}</div>
                        <div class="cart-item-price">R$ ${item.price.toFixed(2)}</div>
                    </div>
                    <div class="cart-item-controls">
                        <div class="quantity-control">
                            <button class="quantity-btn decrease" data-id="${item.id}">-</button>
                            <span class="quantity">${item.quantity}</span>
                            <button class="quantity-btn increase" data-id="${item.id}">+</button>
                        </div>
                        <button class="remove-btn" data-id="${item.id}">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                `;
                
                cartBody.appendChild(cartItem);
                subtotal += item.price * item.quantity;
            });
            
            // Atualizar totais
            subtotalElement.textContent = `R$ ${subtotal.toFixed(2)}`;
            totalElement.textContent = `R$ ${subtotal.toFixed(2)}`;
            
            // Adicionar eventos aos botões
            document.querySelectorAll('.decrease').forEach(btn => {
                btn.addEventListener('click', function() {
                    const itemId = parseInt(this.getAttribute('data-id'));
                    decreaseQuantity(itemId);
                });
            });
            
            document.querySelectorAll('.increase').forEach(btn => {
                btn.addEventListener('click', function() {
                    const itemId = parseInt(this.getAttribute('data-id'));
                    increaseQuantity(itemId);
                });
            });
            
            document.querySelectorAll('.remove-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const itemId = parseInt(this.getAttribute('data-id'));
                    removeFromCart(itemId);
                });
            });
        }

        // Encontrar produto por ID
        function findProductById(productId) {
            for (const category in products) {
                const product = products[category].find(p => p.id === productId);
                if (product) return product;
            }
            return null;
        }

        // Diminuir quantidade do item no carrinho
        function decreaseQuantity(itemId) {
            const item = cart.find(i => i.id === itemId);
            if (item && item.quantity > 1) {
                item.quantity--;
                renderCartItems();
                updateCartCount();
            }
        }

        // Aumentar quantidade do item no carrinho
        function increaseQuantity(itemId) {
            const item = cart.find(i => i.id === itemId);
            if (item) {
                item.quantity++;
                renderCartItems();
                updateCartCount();
            }
        }

        // Remover item do carrinho
        function removeFromCart(itemId) {
            cart = cart.filter(i => i.id !== itemId);
            renderCartItems();
            updateCartCount();
        }

        // Enviar pedido via WhatsApp
        function submitOrder() {
            if (cart.length === 0) {
                alert('Seu carrinho está vazio!');
                return;
            }
            
            // Validar método de pagamento
            if (!paymentMethodInput.value) {
                alert('Por favor, selecione uma forma de pagamento.');
                return;
            }
            
            // Coletar dados do formulário
            const formData = {
                name: document.getElementById('customerName').value,
                phone: document.getElementById('customerPhone').value,
                address: document.getElementById('customerAddress').value,
                number: document.getElementById('customerNumber').value,
                reference: document.getElementById('customerReference').value,
                notes: document.getElementById('customerNotes').value,
                payment: paymentMethodInput.value
            };
            
            // Validar campos obrigatórios
            if (!formData.name || !formData.phone || !formData.address || !formData.number) {
                alert('Por favor, preencha todos os campos obrigatórios.');
                return;
            }
            
            // Montar mensagem
            let message = `*NOVO PEDIDO - CANTINHO DO SABOR*\n\n`;
            message += `*CLIENTE:* ${formData.name}\n`;
            message += `*CONTATO:* ${formData.phone}\n`;
            message += `*ENDEREÇO:* ${formData.address}, ${formData.number}\n`;
            message += `*PONTO DE REFERÊNCIA:* ${formData.reference || 'Não informado'}\n`;
            message += `*FORMA DE PAGAMENTO:* ${formData.payment.toUpperCase()}\n`;
            
            if (formData.notes) {
                message += `*OBSERVAÇÕES:* ${formData.notes}\n`;
            }
            
            message += `\n*ITENS:*\n`;
            
            let total = 0;
            cart.forEach(item => {
                const itemTotal = item.price * item.quantity;
                message += `° ${item.quantity}X ${item.name} - R$ ${itemTotal.toFixed(2)}\n`;
                if (item.options) {
                    message += `  _${item.options}_\n`;
                }
                total += itemTotal;
            });
            
            message += `\n*TOTAL: R$ ${total.toFixed(2)}*`;
            
            // Codificar mensagem para URL
            const encodedMessage = encodeURIComponent(message);
            
            // Número do WhatsApp
            const phoneNumber = '5587933009283';
            
            // Redirecionar para WhatsApp
            window.open(`https://wa.me/${phoneNumber}?text=${encodedMessage}`, '_blank');
            
            // Limpar carrinho e formulário
            cart = [];
            updateCartCount();
            cartForm.reset();
            closeCartModal();
            
            // Mostrar mensagem de sucesso
            alert('Pedido enviado com sucesso! Em breve entraremos em contato para confirmar.');
        }
    </script>
</body>
</html>
